
<app-navbar></app-navbar>

<app-issue-modal [issue]="currentIssue" (addOrRemoveIssue)="changeIssueInput($event)"></app-issue-modal>
<app-login-modal (validLogin)="changeCredentials($event)"></app-login-modal>

<main class="d-flex flex-nowrap" style="position: fixed; height: 92vh; width: 100vw;">
  <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 170px;">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
      <svg width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
      <span class="fs-4">Sidebar</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <app-navbarelement pageNumber=0 title="Hola" imagePath="assets/house-door.svg" (changePage)="updatePage($event)"></app-navbarelement>
      <app-navbarelement pageNumber=1 title="Jira log app" imagePath="assets/jira.svg" (changePage)="updatePage($event)"></app-navbarelement>
    </ul>
    <hr>
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
        <strong>mdo</strong>
      </a>
      <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#loginModal" *ngIf="!this.logged">Log in</button></li>
        <li><button class="dropdown-item" (click)="logout()" type="button" *ngIf="this.logged">Log out</button></li>
      </ul>
    </div>
  </div>
    <div class="container-fluid overflow-auto mt-1">
      <ng-container [ngSwitch]="selectedPageIndex">
        <!--Container for Jira integration-->
        <ng-container *ngSwitchCase="1">
          <ng-container *ngIf="this.logged">
            <app-taskbar [issuesParam]="issues" [issuesToInputParam]="issuesToInput" [loginDomain]="this.gDomain" [loginEmail]="this.gEmail" [loginToken]="this.gToken" (changeCurrentIssueEvent)=changeSelectedIssue($event)></app-taskbar>
          </ng-container>
          <ng-container *ngIf="!this.logged">
            <div class="d-flex flex-column align-items-center justify-content-center" style="height: 100%; width: 100%;">
                <h1>You must log in to use this app</h1>
                <img src="assets/plug-svgrepo-com.svg" width="30%" height="30%">
            </div>
          </ng-container>
        </ng-container>
        <!--End of container for Jira integration-->
      </ng-container>
    </div>
</main>

  
<router-outlet></router-outlet>